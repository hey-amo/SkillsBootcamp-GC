<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <title><%= movie.title %> - Movie Details</title>
</head>
<body>
    <header>
        <nav>
            <p><a href="/">Home</a> &gt; Movie Details</p>
        </nav>

        <h1>Movie Details</h1>
    </header>
    
    <!-- Show URL parameters for success/error messages -->
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const success = urlParams.get('success');
        const error = urlParams.get('error');
        if (success) {
            document.write('<p class="success"><strong>Success:</strong> ' + success + '</p>');
        }
        if (error) {
            document.write('<p class="notification error"><strong>Error:</strong> ' + error + '</p>');
        }
    </script>
    
    <section id="viewMovieSection">
        <h2><%= movie.title %></h2>
        
        <% if (movie.poster) { %>
            <p><img src="<%= movie.poster %>" alt="<%= movie.title %> poster"></p>
        <% } %>
        
        <table>
            <tr>
                <td class="padding8PX bold">Title:</td>
                <td class="padding8PX"><%= movie.title %></td>
            </tr>
            
            <% if (movie.year) { %>
            <tr>
                <td class="bold">Year:</td>
                <td><%= movie.year %></td>
            </tr>
            <% } %>
            
            <% if (movie.director) { %>
            <tr>
                <td class="bold">Director:</td>
                <td><%= movie.director %></td>
            </tr>
            <% } %>
            
            <% if (movie.type) { %>
            <tr>
                <td class="bold">Type:</td>
                <td><%= movie.type %></td>
            </tr>
            <% } %>
            
            <% if (movie.imdbRating) { %>
            <tr>
                <td class="bold">IMDB Rating:</td>
                <td><%= movie.imdbRating %></td>
            </tr>
            <% } %>
            
            <% if (movie.cast && movie.cast.length > 0) { %>
            <tr>
                <td class="bold">Cast:</td>
                <td>
                    <ul class="castList">
                        <% movie.cast.forEach(function(actor) { %>
                            <li><%= actor %></li>
                        <% }); %>
                    </ul>
                </td>
            </tr>
            <% } %>
            
            <tr>
                <td class="bold">Movie ID:</td>
                <td><code><%= movie._id %></code></td>
            </tr>
        </table>
    </section>
    
    <footer class="margin-top-gap clearAll">
        <p>
            <a href="/" class="backBtn">‚Üê Back to Movies</a>  
            <a href="/edit/<%= movie._id %>" class="editBtn">Edit Movie</a> 
            <a href="/delete/<%= movie._id %>" onclick="return confirm('Are you sure you want to delete this movie?')" class="deleteBtn">Delete Movie</a>
        </p>
    </footer>

</body>
</html>