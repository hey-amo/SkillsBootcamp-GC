<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <title><%= movie.title %> - Movie Details</title>
</head>
<body>
    <header>
        <nav>
            <p><a href="/">Home</a> &gt; Movie Details</p>
        </nav>

        <h1>Movie Details</h1>
    </header>
    
    <!-- Show URL parameters for success/error messages -->
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const success = urlParams.get('success');
        const error = urlParams.get('error');
        if (success) {
            document.write('<p class="success"><strong>Success:</strong> ' + success + '</p>');
        }
        if (error) {
            document.write('<p class="notification error"><strong>Error:</strong> ' + error + '</p>');
        }
    </script>
    
    <section>
        <h2><%= movie.title %></h2>
        
        <% if (movie.poster) { %>
            <p><img src="<%= movie.poster %>" alt="<%= movie.title %> poster"></p>
        <% } %>
        
        <table>
            <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 8px; font-weight: bold;">Title:</td>
                <td style="padding: 8px;"><%= movie.title %></td>
            </tr>
            
            <% if (movie.year) { %>
            <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 8px; font-weight: bold;">Year:</td>
                <td style="padding: 8px;"><%= movie.year %></td>
            </tr>
            <% } %>
            
            <% if (movie.director) { %>
            <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 8px; font-weight: bold;">Director:</td>
                <td style="padding: 8px;"><%= movie.director %></td>
            </tr>
            <% } %>
            
            <% if (movie.type) { %>
            <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 8px; font-weight: bold;">Type:</td>
                <td style="padding: 8px;"><%= movie.type %></td>
            </tr>
            <% } %>
            
            <% if (movie.imdbRating) { %>
            <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 8px; font-weight: bold;">IMDB Rating:</td>
                <td style="padding: 8px;"><%= movie.imdbRating %></td>
            </tr>
            <% } %>
            
            <% if (movie.cast && movie.cast.length > 0) { %>
            <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 8px; font-weight: bold; vertical-align: top;">Cast:</td>
                <td style="padding: 8px;">
                    <ul style="margin: 0; padding-left: 20px;">
                        <% movie.cast.forEach(function(actor) { %>
                            <li><%= actor %></li>
                        <% }); %>
                    </ul>
                </td>
            </tr>
            <% } %>
            
            <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 8px; font-weight: bold;">Movie ID:</td>
                <td style="padding: 8px;"><code><%= movie._id %></code></td>
            </tr>
        </table>
        
        <div class="margin-top-gap clearAll">
            <a href="/" style="background: #007cba; color: white; padding: 10px 15px; text-decoration: none; margin-right: 10px;">‚Üê Back to Movies</a>
            <a href="/edit/<%= movie._id %>" style="background: #28a745; color: white; padding: 10px 15px; text-decoration: none; margin-right: 10px;">Edit Movie</a>
            <a href="/delete/<%= movie._id %>" onclick="return confirm('Are you sure you want to delete this movie?')" style="background: #dc3545; color: white; padding: 10px 15px; text-decoration: none;">Delete Movie</a>
        </div>

    </section>>
</body>
</html>